{"version":3,"sources":["../src/FormControl.jsx"],"names":["schemas","methods","props","classNames","values","delay","delayValidateField","bind","fields","Object","keys","forEach","name","className","static","value","state","validator","assign","initField","init","onFormChange","nextProps","newValue","assembleFieldChange","assembleFieldValidate","setState","every","result","Component","propTypes","object","number","childContextTypes","isRequired","func","defaultProps","classes","initClassNames","schema","validateByField","error","classNameArray","success","filter","item","join","message","undefined","validateField","validateFieldsByNames","names","isValid","e","target","type","theValue","slice","index","indexOf","push","splice","formDidChange","changeValues","addSchemas","removeSchemas","validateByNames","addValues","removeValues","validate"],"mappings":"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","file":"FormControl.js","sourcesContent":["/**\n * A lightweight and extensible React validation component\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Validator from 'validate-framework-utils';\nimport debounce from 'lodash/debounce';\nimport noop from 'lodash/noop';\n\n/**\n * React validation component\n * @param schemas\n * @param methods Extended Validation Method\n * @return Component\n */\nexport default (schemas, methods) => FormComponent => (\n\n  /**\n   * Returns a react form\n   */\n  class FormControl extends React.Component {\n\n    static propTypes = {\n      values: PropTypes.object,\n      classNames: PropTypes.object,\n      delay: PropTypes.number,\n    };\n\n    static childContextTypes = {\n      fields: PropTypes.object.isRequired,\n      initField: PropTypes.func.isRequired,\n      onFormChange: PropTypes.func.isRequired,\n    };\n\n    static defaultProps = {\n      classNames: {},\n      delay: 0,\n    };\n\n    schemas = Object.assign({}, schemas);\n\n    constructor(props) {\n      super(props);\n      const {\n        classNames,\n        values,\n        delay,\n      } = props;\n\n      if (delay) {\n        this.delayValidateField = debounce(this.delayValidateField.bind(this), delay);\n      }\n\n      const fields = {};\n      // Assemble the initialization data into fields\n      if (values) {\n        Object.keys(values).forEach((name) => {\n          fields[name] = {\n            className: classNames.static,\n            value: values[name],\n          };\n        });\n      }\n\n      this.state = {\n        fields,\n      };\n\n      // Initializes the validation component and customizes the validation method\n      this.validator = new Validator();\n      Object.assign(this.validator, methods, {\n        fields,\n      });\n    }\n\n    getChildContext() {\n      return {\n        fields: this.state.fields,\n        initField: this.init,\n        onFormChange: this.onFormChange,\n      };\n    }\n\n    componentWillReceiveProps(nextProps) {\n      const { values } = nextProps;\n      // No value\n      if (!values) {\n        return;\n      }\n      // Updates the state from the parent component\n      const { classNames } = this.props;\n      const { fields } = this.state;\n\n      (async () => {\n        // eslint-disable-next-line no-restricted-syntax\n        for (const name of Object.keys(values)) {\n          const newValue = values[name];\n          // Validate the new data\n          if (fields[name]) {\n            // diff\n            if (fields[name].value !== newValue) {\n              this.assembleFieldChange(name, newValue);\n              await this.assembleFieldValidate(name, newValue);\n            }\n          } else {\n            // Add a new field\n            fields[name] = {\n              className: classNames.static,\n              value: newValue,\n            };\n          }\n        }\n        // Update\n        this.setState({\n          fields,\n        });\n      })();\n    }\n\n    /**\n     * Get the fields object\n     * @returns {Object}\n     */\n    get fields() {\n      return this.state.fields;\n    }\n\n    /**\n     * Gets a list of form values\n     * @return {Object}\n     */\n    get formValues() {\n      const { fields } = this.state;\n      const values = {};\n      Object.keys(fields).forEach((name) => {\n        values[name] = fields[name].value;\n      });\n      return values;\n    }\n\n    /**\n     * Gets the global validation status\n     * @return {Boolean}\n     */\n    get isAllValid() {\n      const { fields } = this.state;\n      return Object.keys(this.schemas)\n        .every(name => fields[name] && fields[name].result);\n    }\n\n    /**\n     * Initializes the form value and classes\n     * @param values\n     * @param classes\n     */\n    init = (values, classes) => {\n      const { fields } = this.state;\n      // Assign classNames\n      this.initClassNames(classes);\n      // Initialize\n      Object.keys(values).forEach((name) => {\n        const value = values[name];\n        fields[name] = {\n          className: this.props.classNames.static,\n          value,\n        };\n        // Synchronize values external state\n        if (this.props.values) {\n          this.props.values[name] = value;\n        }\n      });\n      return this;\n    };\n\n    /**\n     * Init classNames\n     * @param classes\n     */\n    initClassNames = (classes) => {\n      // Merge\n      Object.assign(this.props.classNames, classes);\n      return this;\n    };\n\n    /**\n     * Assemble the data\n     * This method is not operational\n     * @param name\n     * @param value\n     * @return {FormControl}\n     */\n    assembleFieldChange = (name, value) => {\n      Object.assign(this.state.fields[name], {\n        value,\n      });\n      return this;\n    };\n\n    /**\n     * Validate the data\n     * This method is not operational\n     * @param name\n     * @param value\n     * @return {FormControl}\n     */\n    assembleFieldValidate = async (name, value) => {\n      const { classNames } = this.props;\n      const { fields } = this.state;\n      // No schema is not to validate\n      const schema = this.schemas[name] && Object.assign(this.schemas[name], { value });\n      const { result, error } = schema\n        ? await this.validator.validateByField(schema)\n        : {};\n      // Assembly class name\n      // Validation success and validation failure Add the appropriate class\n      const classNameArray = [\n        classNames.static,\n        result ? classNames.success : null,\n        result === false ? classNames.error : null,\n      ];\n      // Assemble\n      Object.assign(fields[name], {\n        className: classNameArray.filter(item => item).join('\\u{20}'),\n        result,\n        message: error ? error.message : undefined,\n      });\n      return this;\n    };\n\n    /**\n     * Validate a single field\n     * @param name\n     * @param value\n     * @return {Boolean}\n     */\n    validateField = async (name, value) => {\n      const { fields } = this.state;\n      // Assemble\n      await this.assembleFieldValidate(name, value);\n      return fields[name].result;\n    };\n\n    /**\n     * DelayValidateField\n     * @param name\n     * @param value\n     */\n    async delayValidateField(name, value) {\n      const { fields } = this.state;\n      // Assemble\n      await this.assembleFieldValidate(name, value);\n      this.setState({\n        fields,\n      });\n      return this;\n    }\n\n    /**\n     * Validate fields by names\n     * @param names\n     * @return {Boolean}\n     */\n    validateFieldsByNames = async (...names) => {\n      const { fields } = this.state;\n      let isValid = true;\n      // eslint-disable-next-line no-restricted-syntax\n      for (const name of names) {\n        const result = fields[name] && await this.validateField(name, fields[name].value);\n        // Exclude unauthenticated and validated successfully\n        if (result === false) {\n          isValid = false;\n        }\n      }\n      return isValid;\n    };\n\n    // Form change event listener\n    onFormChange = (e) => {\n      const { name, type, value } = e.target;\n      const { fields } = this.state;\n\n      // Dependent on the name attribute\n      if (!name) {\n        return;\n      }\n\n      let theValue;\n      // Checkbox processing\n      if (type === 'checkbox') {\n        theValue = fields[name].value.slice();\n        const index = theValue.indexOf(value);\n        if (index === -1) {\n          theValue.push(value);\n        } else {\n          theValue.splice(index, 1);\n        }\n      } else {\n        theValue = value;\n      }\n      // Synchronize values external state\n      if (this.props.values) {\n        this.props.values[name] = theValue;\n      }\n      // Assemble and delay validate\n      this.assembleFieldChange(name, theValue).delayValidateField(name, theValue);\n      // Update\n      this.setState({\n        fields,\n      });\n      this.formDidChange();\n    };\n\n    /**\n     * Customize to change the values\n     * @param values\n     */\n    changeValues = (values) => {\n      const { fields } = this.state;\n      // Initializes\n      this.init(values);\n      Object.keys(values).forEach(name => this.assembleFieldChange(name, values[name])\n        .delayValidateField(name, values[name]));\n      // Update\n      this.setState({\n        fields,\n      });\n      this.formDidChange();\n      return this;\n    };\n\n    /**\n     * Add one or more validation rules\n     * @param schema\n     */\n    addSchemas = (schema) => {\n      Object.assign(this.schemas, schema);\n      return this;\n    };\n\n    /**\n     * Delete one or more validation rules\n     * @param names\n     */\n    removeSchemas = (...names) => {\n      names.forEach((name) => {\n        delete this.schemas[name];\n      });\n      // Validate the deleted status\n      this.validateByNames(...names);\n      return this;\n    };\n\n    /**\n     * Add one or more fields\n     * @param values\n     */\n    addValues = (values) => {\n      const { fields } = this.state;\n      // Initializes\n      this.init(values);\n      // Update\n      this.setState({\n        fields,\n      });\n      this.formDidChange();\n      return this;\n    };\n\n    /**\n     * Deletes one or more fields\n     * @param names\n     */\n    removeValues = (...names) => {\n      const { fields } = this.state;\n      names.forEach((name) => {\n        delete fields[name];\n      });\n      // Update\n      this.setState({\n        fields,\n      });\n      this.formDidChange();\n      return this;\n    };\n\n    /**\n     * Validate the component through names\n     * @param names\n     * @return {Boolean}\n     */\n    validateByNames = async (...names) => {\n      const result = await this.validateFieldsByNames(...names);\n      const { fields } = this.state;\n      // Update\n      this.setState({\n        fields,\n      });\n      return result;\n    };\n\n    // Validate all\n    validate = () => {\n      const names = Object.keys(this.schemas);\n      return this.validateByNames(...names);\n    };\n\n    // After change\n    formDidChange = noop;\n\n    render() {\n      return (\n        <FormComponent\n          {...this.props}\n          formControl={this}\n        />\n      );\n    }\n  }\n);\n"]}